/*! sentio Version: 0.1.0 */
angular.module("sentio.realtime",[]),angular.module("sentio.realtime").directive("sentioRtTimeline",function(e,t,i){"use strict";return{restrict:"A",scope:{model:"=sentioModel",interval:"=sentioInterval",delay:"=sentioDelay",yExtent:"=sentioYExtent",duration:"=sentioDuration",efficient:"=sentioEfficient",resizeWidth:"@sentioResizeWidth",resizeHeight:"@sentioResizeHeight",configure:"&sentioConfigureFn"},replace:!1,link:function(n,l,o){var r=d3.select(l[0]),u=sentio.realtime.timeline();u.init(r),n.$watch("configure",function(){null!=n.configure&&n.configure({timeline:u})}),n.$watchCollection("model",function(e,t){(null!=t||null!=e)&&(u.data(e).redraw(),u.start())}),n.$watch("interval",function(e,t){(null!=t||null!=e)&&u.interval(e).redraw()}),n.$watch("delay",function(e,t){(null!=t||null!=e)&&u.delay(e).redraw()}),n.$watchCollection("yExtent",function(e,t){(null!=t||null!=e)&&u.yExtent(e).redraw()}),n.$watch("duration",function(e,t){(null!=t||null!=e)&&u.duration(e)},!0),n.$watch("efficient",function(e,t){(null!=t||null!=e)&&u.efficient(e)},!0);var a,s=null!=o.sentioResizeWidth,c=null!=o.sentioResizeHeight,d=angular.element(t),f=function(){var t=e[0].body,i=t.style.overflow;t.style.overflow="hidden";var n=l[0],r=n.attributes.width|n.style.width|n.clientWidth,a=n.attributes.height|n.style.height|n.clientHeight,d=s?r-o.sentioResizeWidth:void 0,f=c?a-o.sentioResizeHeight:void 0;t.style.overflow=i,console.log("resize rt.timeline height: "+f+" width: "+d),s&&u.width(d),c&&u.height(f),u.redraw()},h=function(){void 0!==a&&i.cancel(a),a=i(f,200)};(s||c)&&(d.on("resize",h),h()),n.$on("$destroy",function(){d.off("resize",h)})}}});