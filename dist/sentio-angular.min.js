/*! sentio Version: 0.1.0 */
angular.module("sentio.realtime",[]),angular.module("sentio.realtime").directive("sentioRtTimeline",function(e,t,i){"use strict";return{restrict:"A",scope:{model:"=sentioModel",interval:"=sentioInterval",delay:"=sentioDelay",yExtent:"=sentioYExtent",duration:"=sentioDuration",resizeWidth:"@sentioResizeWidth",resizeHeight:"@sentioResizeHeight",configure:"&sentioConfigureFn"},replace:!1,link:function(n,l,o){var r=d3.select(l[0]),a=sentio.realtime.timeline();a.init(r),n.$watch("configure",function(){null!=n.configure&&n.configure({timeline:a})}),n.$watchCollection("model",function(e,t){(null!=t||null!=e)&&(a.data(e).redraw(),a.start())}),n.$watch("interval",function(e,t){(null!=t||null!=e)&&a.interval(e).redraw()}),n.$watch("delay",function(e,t){(null!=t||null!=e)&&a.delay(e).redraw()}),n.$watch("yExtent",function(e,t){(null!=t||null!=e)&&a.yExtent(e).redraw()}),n.$watch("duration",function(e,t){(null!=t||null!=e)&&a.duration(e)});var s,u=null!=o.sentioResizeWidth,d=null!=o.sentioResizeHeight,c=angular.element(t),h=function(){var t=e[0].body,i=t.style.overflow;t.style.overflow="hidden";var n=l[0],r=n.attributes.width|n.style.width|n.clientWidth,s=n.attributes.height|n.style.height|n.clientHeight,c=u?r-o.sentioResizeWidth:void 0,h=d?s-o.sentioResizeHeight:void 0;t.style.overflow=i,console.log("resize rt.timeline height: "+h+" width: "+c),u&&a.width(c),d&&a.height(h),a.redraw()},f=function(){void 0!==s&&i.cancel(s),s=i(h,200)};(u||d)&&(c.on("resize",f),f()),n.$on("$destroy",function(){c.off("resize",f)})}}});