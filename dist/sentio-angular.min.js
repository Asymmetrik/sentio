/*! sentio Version: 0.2.0 */
angular.module("sentio",[]),angular.module("sentio.realtime",[]),angular.module("sentio.realtime").directive("sentioRtTimeline",function(e,t,i){"use strict";return{restrict:"A",scope:{model:"=sentioModel",interval:"=sentioInterval",delay:"=sentioDelay",yExtent:"=sentioYExtent",duration:"=sentioDuration",efficient:"=sentioEfficient",resizeWidth:"@sentioResizeWidth",resizeHeight:"@sentioResizeHeight",configure:"&sentioConfigureFn"},replace:!1,link:function(n,l,o){var r=d3.select(l[0]),u=sentio.realtime.timeline();u.init(r),n.$watch("configure",function(){null!=n.configure&&n.configure({timeline:u})}),n.$watchCollection("model",function(e,t){(null!=t||null!=e)&&(u.data(e).redraw(),u.start())}),n.$watch("interval",function(e,t){(null!=t||null!=e)&&u.interval(e).redraw()}),n.$watch("delay",function(e,t){(null!=t||null!=e)&&u.delay(e).redraw()}),n.$watchCollection("yExtent",function(e,t){(null!=t||null!=e)&&u.yExtent(e).redraw()}),n.$watch("duration",function(e,t){(null!=t||null!=e)&&u.duration(e)},!0),n.$watch("efficient",function(e,t){(null!=t||null!=e)&&u.efficient(e)},!0);var s,c=null!=o.sentioResizeWidth,a=null!=o.sentioResizeHeight,d=angular.element(t),f=function(){var t=e[0].body,i=t.style.overflow;t.style.overflow="hidden";var n=l[0],r=n.attributes.width|n.style.width|n.clientWidth,s=n.attributes.height|n.style.height|n.clientHeight,d=c?r-o.sentioResizeWidth:void 0,f=a?s-o.sentioResizeHeight:void 0;t.style.overflow=i,console.log("resize rt.timeline height: "+f+" width: "+d),c&&u.width(d),a&&u.height(f),u.redraw()},h=function(){void 0!==s&&i.cancel(s),s=i(f,200)};(c||a)&&(d.on("resize",h),h()),n.$on("$destroy",function(){d.off("resize",h)})}}}),angular.module("sentio").directive("sentioTimeline",function(e,t,i){"use strict";return{restrict:"A",scope:{model:"=sentioModel",yExtent:"=sentioYExtent",xExtent:"=sentioXExtent",duration:"=sentioDuration",resizeWidth:"@sentioResizeWidth",resizeHeight:"@sentioResizeHeight",configureFn:"&sentioConfigureFn",filterFn:"&sentioFilterFn"},replace:!1,link:function(n,l,o){var r=d3.select(l[0]),u=sentio.timeline.line();null!=o.sentioFilterFn&&u.filter(!0),n.$watch("filterFn",function(){u.filter().on("filterend",function(e){n.$apply(function(){n.filterFn({filterState:e})})})}),u.init(r),n.$watch("configureFn",function(){null!=n.configureFn&&n.configureFn({timeline:u})}),n.$watchCollection("model",function(e,t){(null!=t||null!=e)&&u.data(e).redraw()}),n.$watchCollection("yExtent",function(e,t){(null!=t||null!=e)&&u.yExtent(e).redraw()}),n.$watchCollection("xExtent",function(e,t){(null!=t||null!=e)&&u.xExtent(e).redraw()}),n.$watch("duration",function(e,t){(null!=t||null!=e)&&u.duration(e)},!0);var s,c=null!=o.sentioResizeWidth,a=null!=o.sentioResizeHeight,d=angular.element(t),f=function(){var t=e[0].body,i=t.style.overflow;t.style.overflow="hidden";var n=l[0],r=n.attributes.width|n.style.width|n.clientWidth,s=n.attributes.height|n.style.height|n.clientHeight,d=c?r-o.sentioResizeWidth:void 0,f=a?s-o.sentioResizeHeight:void 0;t.style.overflow=i,console.log("resize rt.timeline height: "+f+" width: "+d),c&&u.width(d),a&&u.height(f),u.redraw()},h=function(){void 0!==s&&i.cancel(s),s=i(f,200)};(c||a)&&(d.on("resize",h),h()),n.$on("$destroy",function(){d.off("resize",h)})}}});