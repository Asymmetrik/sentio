/*! sentio Version: 0.2.1 */
angular.module("sentio",[]),angular.module("sentio.realtime",[]),angular.module("sentio.realtime").directive("sentioRtTimeline",function(e,t,i){"use strict";return{restrict:"A",scope:{model:"=sentioModel",interval:"=sentioInterval",delay:"=sentioDelay",yExtent:"=sentioYExtent",duration:"=sentioDuration",efficient:"=sentioEfficient",resizeWidth:"@sentioResizeWidth",resizeHeight:"@sentioResizeHeight",configure:"&sentioConfigureFn"},replace:!1,link:function(n,l,o){var r=d3.select(l[0]),s=sentio.realtime.timeline(),u=l[0].style.width;null!=u&&""!==u&&(u=parseFloat(u.substring(0,u.length-2)),null==u||Number.isNaN(u)||s.width(u));var a=l[0].style.height;null!=a&&""!==a&&(a=parseFloat(a.substring(0,a.length-2)),null==a||Number.isNaN(a)||s.height(a)),s.init(r),n.$watch("configure",function(){null!=n.configure&&n.configure({timeline:s})}),n.$watchCollection("model",function(e,t){(null!=t||null!=e)&&(s.data(e).redraw(),s.start())}),n.$watch("interval",function(e,t){(null!=t||null!=e)&&s.interval(e).redraw()}),n.$watch("delay",function(e,t){(null!=t||null!=e)&&s.delay(e).redraw()}),n.$watchCollection("yExtent",function(e,t){(null!=t||null!=e)&&s.yExtent(e).redraw()}),n.$watch("duration",function(e,t){(null!=t||null!=e)&&s.duration(e)},!0),n.$watch("efficient",function(e,t){(null!=t||null!=e)&&s.efficient(e)},!0);var c,h=null!=o.sentioResizeWidth,d=null!=o.sentioResizeHeight,f=angular.element(t),g=function(){var t=e[0].body,i=t.style.overflow;t.style.overflow="hidden";var n=l[0],r=n.attributes.width|n.style.width|n.clientWidth,u=n.attributes.height|n.style.height|n.clientHeight,a=h?r-o.sentioResizeWidth:void 0,c=d?u-o.sentioResizeHeight:void 0;t.style.overflow=i,console.log("resize rt.timeline height: "+c+" width: "+a),h&&s.width(a),d&&s.height(c),s.redraw()},w=function(){void 0!==c&&i.cancel(c),c=i(g,200)};(h||d)&&(f.on("resize",w),w()),n.$on("$destroy",function(){f.off("resize",w)})}}}),angular.module("sentio").directive("sentioTimeline",function(e,t,i){"use strict";return{restrict:"A",scope:{model:"=sentioModel",yExtent:"=sentioYExtent",xExtent:"=sentioXExtent",duration:"=sentioDuration",resizeWidth:"@sentioResizeWidth",resizeHeight:"@sentioResizeHeight",configureFn:"&sentioConfigureFn",filterFn:"&sentioFilterFn"},replace:!1,link:function(n,l,o){var r=d3.select(l[0]),s=sentio.timeline.line(),u=l[0].style.width;null!=u&&""!==u&&(u=parseFloat(u.substring(0,u.length-2)),null==u||Number.isNaN(u)||s.width(u));var a=l[0].style.height;null!=a&&""!==a&&(a=parseFloat(a.substring(0,a.length-2)),null==a||Number.isNaN(a)||s.height(a)),null!=o.sentioFilterFn&&s.filter(!0),n.$watch("filterFn",function(){s.filter().on("filterend",function(e){n.$apply(function(){n.filterFn({filterState:e})})})}),s.init(r),n.$watch("configureFn",function(){null!=n.configureFn&&n.configureFn({timeline:s})}),n.$watchCollection("model",function(e,t){(null!=t||null!=e)&&s.data(e).redraw()}),n.$watchCollection("yExtent",function(e,t){(null!=t||null!=e)&&s.yExtent(e).redraw()}),n.$watchCollection("xExtent",function(e,t){(null!=t||null!=e)&&s.xExtent(e).redraw()}),n.$watch("duration",function(e,t){(null!=t||null!=e)&&s.duration(e)},!0);var c,h=null!=o.sentioResizeWidth,d=null!=o.sentioResizeHeight,f=angular.element(t),g=function(){var t=e[0].body,i=t.style.overflow;t.style.overflow="hidden";var n=l[0],r=n.attributes.width|n.style.width|n.clientWidth,u=n.attributes.height|n.style.height|n.clientHeight,a=h?r-o.sentioResizeWidth:void 0,c=d?u-o.sentioResizeHeight:void 0;t.style.overflow=i,console.log("resize rt.timeline height: "+c+" width: "+a),h&&s.width(a),d&&s.height(c),s.redraw()},w=function(){void 0!==c&&i.cancel(c),c=i(g,200)};(h||d)&&(f.on("resize",w),w()),n.$on("$destroy",function(){f.off("resize",w)})}}});