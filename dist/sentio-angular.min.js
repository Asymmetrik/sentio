/*! sentio Version: 0.1.0 */
angular.module("sentio.realtime",[]),angular.module("sentio.realtime").directive("rtTimeline",function(e,t,i){"use strict";return{restrict:"A",scope:{model:"=",interval:"=",delay:"=",yExtent:"=",duration:"=",resizeWidth:"@",resizeHeight:"@"},replace:!1,link:function(l,n,r){var o=d3.select(n[0]),a=sentio.realtime.timeline();a.init(o),l.$watchCollection("model",function(e,t){(null!=t||null!=e)&&(a.data(e).redraw(),a.start())}),l.$watch("interval",function(e,t){(null!=t||null!=e)&&a.interval(e).redraw()}),l.$watch("delay",function(e,t){(null!=t||null!=e)&&a.delay(e).redraw()}),l.$watch("yExtent",function(e,t){(null!=t||null!=e)&&a.yExtent(e).redraw()}),l.$watch("duration",function(e,t){(null!=t||null!=e)&&a.duration(e)});var u,d=null!=r.resizeWidth,c=null!=r.resizeHeight,s=angular.element(t),h=function(){var t=e[0].body,i=t.style.overflow;t.style.overflow="hidden";var l=n[0],o=l.attributes.width|l.style.width|l.clientWidth,u=l.attributes.height|l.style.height|l.clientHeight,s=d?o-r.resizeWidth:void 0,h=c?u-r.resizeHeight:void 0;t.style.overflow=i,console.log("resize rt.timeline height: "+h+" width: "+s),d&&a.width(s),c&&a.height(h),a.redraw()},w=function(){void 0!==u&&i.cancel(u),u=i(h,200)};(d||c)&&(s.on("resize",w),w()),l.$on("$destroy",function(){s.off("resize",w)})}}});