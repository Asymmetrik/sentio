/*! sentio Version: 0.1.0 */
function sentio_realtime_timeline(){"use strict";function t(){}function n(){if(x){var t=new Date,n=a(t);p.x.domain([t-u-g,t-u]),p.y.domain(n),v.g.line.select(".line").attr("d",y).attr("transform",null),null!=f&&f.active?r(t):e(t)}}function e(t){v.g.xAxis.transition().duration(c.reveal).ease("linear").call(h.x),v.g.yAxis.transition().duration(c.animate).call(h.y),v.g.line.select(".line").transition().duration(c.reveal).ease("linear").attr("transform","translate(-"+p.x(t-u-g+c.reveal)+")").each("end",n)}function r(t){v.g.xAxis.call(h.x).call(h.x),v.g.yAxis.call(h.y),v.g.line.select(".line").attr("transform","translate(-"+p.x(t-u-g+c.reveal)+")"),window.setTimeout(n,1e3/f.fps)}function a(t){var n=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];return I.forEach(function(e){var r=m.y(e),a=m.x(e);a<t-u+c.reveal&&(n[0]>r&&(n[0]=r),n[1]<r&&(n[1]=r))}),Number.POSITIVE_INFINITY===n[0]&&Number.NEGATIVE_INFINITY===n[1]&&(n=[0,10]),n[0]>=n[1]&&(n[1]=n[0]+1),n[1]+=.1*(n[1]-n[0]),null!=d&&(null!=d[0]&&(n[0]=d[0]),null!=d[1]&&(n[1]=d[1])),n}var i="rt_timeline_clip_"+Date.now(),l={top:10,right:10,bottom:20,left:40},o=100,s=600,u=1e4,g=6e4,c={reveal:750,animate:300},x=!1,f={active:!1,fps:10},m={x:function(t){return t[0]},y:function(t){return t[1]}},d=[void 0,void 0],p={x:d3.time.scale(),y:d3.scale.linear()},h={x:d3.svg.axis().scale(p.x).orient("bottom"),y:d3.svg.axis().scale(p.y).orient("left").ticks(4)},v={svg:void 0,g:{container:void 0,xAxis:void 0,yAxis:void 0,line:void 0},clipPath:void 0},y=d3.svg.line().interpolate("linear");y.x(function(t,n){return p.x(m.x(t,n))}),y.y(function(t,n){return p.y(m.y(t,n))});var I=[];return t.init=function(n){return v.svg=n.append("svg"),v.clipPath=v.svg.append("defs").append("clipPath").attr("id",i).append("rect"),v.g.container=v.svg.append("g"),v.g.line=v.g.container.append("g").attr("clip-path","url(#"+i+")"),v.g.line.append("path").attr("class","line"),v.g.xAxis=v.g.container.append("g").attr("class","x axis"),v.g.yAxis=v.g.container.append("g").attr("class","y axis"),t},t.data=function(n){return arguments.length?(I=n,v.g.line.datum(I),t):I},t.redraw=function(){Date.now();return p.x.range([0,s-l.left-l.right]),p.y.range([o-l.top-l.bottom,0]),v.clipPath.attr("width",s-l.left-l.right).attr("height",o-l.top-l.bottom),v.svg.attr("width",s).attr("height",o),v.g.xAxis.attr("transform","translate(0,"+p.y.range()[0]+")"),v.g.yAxis.attr("class","y axis"),v.g.container.attr("transform","translate("+l.left+","+l.top+")"),t},t.start=function(){x||(x=!0,n())},t.stop=function(){x&&(x=!1)},t.restart=function(){t.stop(),t.start()},t.width=function(n){return arguments.length?(s=n,t):s},t.height=function(n){return arguments.length?(o=n,t):o},t.xAxis=function(n){return arguments.length?(h.x=n,t):h.x},t.yAxis=function(n){return arguments.length?(h.y=n,t):h.y},t.xScale=function(n){return arguments.length?(p.x=n,h.x.scale(n),t):p.x},t.yScale=function(n){return arguments.length?(p.y=n,h.y.scale(n),t):p.y},t.interpolation=function(n){return arguments.length?(y.interpolate(n),t):y.interpolate()},t.xValue=function(n){return arguments.length?(m.x=n,t):m.x},t.yValue=function(n){return arguments.length?(m.y=n,t):m.y},t.interval=function(n){return arguments.length?(g=n,t):g},t.delay=function(n){return arguments.length?(u=n,t):u},t.yExtent=function(n){return arguments.length?(d=n,t):d},t.duration=function(n){return arguments.length?(c=n,t):c},t.efficient=function(n){return arguments.length?(f=n,t):f},t}var sentio={},sentio_realtime=sentio.realtime={};sentio.realtime.timeline=sentio_realtime_timeline;