/*! sentio Version: 0.1.0 */
function sentio_realtime_timeline(){"use strict";function t(){}function n(){if(g&&!x.active){var t=new Date,e=r(t);d.x.domain([t-s-u,t-s]),d.y.domain(e),h.g.line.select(".line").attr("d",v).attr("transform",null),h.g.xAxis.transition().duration(c.reveal).ease("linear").call(p.x),h.g.yAxis.transition().duration(c.animate).call(p.y),h.g.line.select(".line").transition().duration(c.reveal).ease("linear").attr("transform","translate(-"+d.x(t-s-u+c.reveal)+")").each("end",n)}}function e(){if(g&&null!=x&&x.active){var t=new Date,n=r(t);d.x.domain([t-s-u,t-s]),d.y.domain(n),h.g.line.select(".line").attr("d",v).attr("transform",null),h.g.xAxis.call(p.x).call(p.x),h.g.yAxis.call(p.y),h.g.line.select(".line").attr("transform","translate(-"+d.x(t-s-u+c.reveal)+")"),window.setTimeout(e,1e3/x.fps)}}function r(t){var n=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];return y.forEach(function(e){var r=f.y(e),a=f.x(e);a<t-s+c.reveal&&(n[0]>r&&(n[0]=r),n[1]<r&&(n[1]=r))}),Number.POSITIVE_INFINITY===n[0]&&Number.NEGATIVE_INFINITY===n[1]&&(n=[0,10]),n[0]>=n[1]&&(n[1]=n[0]+1),n[1]+=.1*(n[1]-n[0]),null!=m&&(null!=m[0]&&(n[0]=m[0]),null!=m[1]&&(n[1]=m[1])),n}var a="rt_timeline_clip_"+Date.now(),i={top:10,right:10,bottom:20,left:40},l=100,o=600,s=1e4,u=6e4,c={reveal:750,animate:300},g=!1,x={active:!1,fps:10},f={x:function(t){return t[0]},y:function(t){return t[1]}},m=[void 0,void 0],d={x:d3.time.scale(),y:d3.scale.linear()},p={x:d3.svg.axis().scale(d.x).orient("bottom"),y:d3.svg.axis().scale(d.y).orient("left").ticks(4)},h={svg:void 0,g:{container:void 0,xAxis:void 0,yAxis:void 0,line:void 0},clipPath:void 0},v=d3.svg.line().interpolate("linear");v.x(function(t,n){return d.x(f.x(t,n))}),v.y(function(t,n){return d.y(f.y(t,n))});var y=[];return t.init=function(n){return h.svg=n.append("svg"),h.clipPath=h.svg.append("defs").append("clipPath").attr("id",a).append("rect"),h.g.container=h.svg.append("g"),h.g.line=h.g.container.append("g").attr("clip-path","url(#"+a+")"),h.g.line.append("path").attr("class","line"),h.g.xAxis=h.g.container.append("g").attr("class","x axis"),h.g.yAxis=h.g.container.append("g").attr("class","y axis"),t},t.data=function(n){return arguments.length?(y=n,h.g.line.datum(y),t):y},t.redraw=function(){Date.now();return d.x.range([0,o-i.left-i.right]),d.y.range([l-i.top-i.bottom,0]),h.clipPath.attr("width",o-i.left-i.right).attr("height",l-i.top-i.bottom),h.svg.attr("width",o).attr("height",l),h.g.xAxis.attr("transform","translate(0,"+d.y.range()[0]+")"),h.g.yAxis.attr("class","y axis"),h.g.container.attr("transform","translate("+i.left+","+i.top+")"),t},t.start=function(){g||(g=!0,null!=x&&x.active?e():n())},t.stop=function(){g&&(g=!1)},t.restart=function(){t.stop(),t.start()},t.width=function(n){return arguments.length?(o=n,t):o},t.height=function(n){return arguments.length?(l=n,t):l},t.xAxis=function(n){return arguments.length?(p.x=n,t):p.x},t.yAxis=function(n){return arguments.length?(p.y=n,t):p.y},t.xScale=function(n){return arguments.length?(d.x=n,p.x.scale(n),t):d.x},t.yScale=function(n){return arguments.length?(d.y=n,p.y.scale(n),t):d.y},t.interpolation=function(n){return arguments.length?(v.interpolate(n),t):v.interpolate()},t.xValue=function(n){return arguments.length?(f.x=n,t):f.x},t.yValue=function(n){return arguments.length?(f.y=n,t):f.y},t.interval=function(n){return arguments.length?(u=n,t):u},t.delay=function(n){return arguments.length?(s=n,t):s},t.yExtent=function(n){return arguments.length?(m=n,t):m},t.duration=function(n){return arguments.length?(c=n,t):c},t.efficient=function(n){return arguments.length?(x=n,t.restart(),t):x},t}var sentio={},sentio_realtime=sentio.realtime={};sentio.realtime.timeline=sentio_realtime_timeline;